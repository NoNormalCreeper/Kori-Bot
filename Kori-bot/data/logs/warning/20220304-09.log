[36mATRI[0m | 03-04 09:14:51 | WARNING nonebot >> Duplicated prefix rule "ï¼lottery"
[36mATRI[0m | 03-04 09:14:51 | WARNING nonebot >> Duplicated prefix rule "/lottery"
[36mATRI[0m | 03-04 09:14:51 | WARNING nonebot >> Duplicated prefix rule "!lottery"
[36mATRI[0m | 03-04 09:14:58 | ERROR plugin.manager >> Failed to import "atri_setu"
Traceback (most recent call last):

  File "/usr/bin/nb", line 8, in <module>
    sys.exit(main())
    â”‚   â”‚    â”” <ClickAliasedGroup main>
    â”‚   â”” <built-in function exit>
    â”” <module 'sys' (built-in)>
  File "/usr/local/python3/lib/python3.8/site-packages/click/core.py", line 1128, in __call__
    return self.main(*args, **kwargs)
           â”‚    â”‚     â”‚       â”” {}
           â”‚    â”‚     â”” ()
           â”‚    â”” <function BaseCommand.main at 0x7fbe226eb040>
           â”” <ClickAliasedGroup main>
  File "/usr/local/python3/lib/python3.8/site-packages/click/core.py", line 1053, in main
    rv = self.invoke(ctx)
         â”‚    â”‚      â”” <click.core.Context object at 0x7fbe22f713a0>
         â”‚    â”” <function MultiCommand.invoke at 0x7fbe226ef0d0>
         â”” <ClickAliasedGroup main>
  File "/usr/local/python3/lib/python3.8/site-packages/click/core.py", line 1659, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
           â”‚               â”‚       â”‚       â”‚      â”” <click.core.Context object at 0x7fbe2a85e220>
           â”‚               â”‚       â”‚       â”” <function Command.invoke at 0x7fbe226ebaf0>
           â”‚               â”‚       â”” <ClickAliasedCommand run>
           â”‚               â”” <click.core.Context object at 0x7fbe2a85e220>
           â”” <function MultiCommand.invoke.<locals>._process_result at 0x7fbe19617940>
  File "/usr/local/python3/lib/python3.8/site-packages/click/core.py", line 1395, in invoke
    return ctx.invoke(self.callback, **ctx.params)
           â”‚   â”‚      â”‚    â”‚           â”‚   â”” {'file': 'bot.py', 'app': 'app'}
           â”‚   â”‚      â”‚    â”‚           â”” <click.core.Context object at 0x7fbe2a85e220>
           â”‚   â”‚      â”‚    â”” <function run at 0x7fbe19742820>
           â”‚   â”‚      â”” <ClickAliasedCommand run>
           â”‚   â”” <function Context.invoke at 0x7fbe226e78b0>
           â”” <click.core.Context object at 0x7fbe2a85e220>
  File "/usr/local/python3/lib/python3.8/site-packages/click/core.py", line 754, in invoke
    return __callback(*args, **kwargs)
                       â”‚       â”” {'file': 'bot.py', 'app': 'app'}
                       â”” ()
  File "/usr/local/python3/lib/python3.8/site-packages/nb_cli/commands/main.py", line 30, in run
    run_bot(file, app)
    â”‚       â”‚     â”” 'app'
    â”‚       â”” 'bot.py'
    â”” <function run_bot at 0x7fbe197325e0>
  File "/usr/local/python3/lib/python3.8/site-packages/nb_cli/handlers/deploy.py", line 19, in run_bot
    module = importlib.import_module(module_name)
             â”‚         â”‚             â”” 'bot'
             â”‚         â”” <function import_module at 0x7fbe2a89e940>
             â”” <module 'importlib' from '/usr/local/python3/lib/python3.8/importlib/__init__.py'>
  File "/usr/local/python3/lib/python3.8/importlib/__init__.py", line 127, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           â”‚          â”‚           â”‚    â”‚        â”‚        â”” 0
           â”‚          â”‚           â”‚    â”‚        â”” None
           â”‚          â”‚           â”‚    â”” 0
           â”‚          â”‚           â”” 'bot'
           â”‚          â”” <function _gcd_import at 0x7fbe2a9cd430>
           â”” <module 'importlib._bootstrap' (frozen)>
  File "<frozen importlib._bootstrap>", line 1014, in _gcd_import
  File "<frozen importlib._bootstrap>", line 991, in _find_and_load
  File "<frozen importlib._bootstrap>", line 975, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 671, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 783, in exec_module
  File "<frozen importlib._bootstrap>", line 219, in _call_with_frames_removed

  File "./bot.py", line 29, in <module>
    nonebot.load_plugins("src/plugins")
    â”‚       â”” <function load_plugins at 0x7fbe205ae700>
    â”” <module 'nonebot' from '/usr/local/python3/lib/python3.8/site-packages/nonebot/__init__.py'>

  File "/usr/local/python3/lib/python3.8/site-packages/nonebot/plugin/load.py", line 39, in load_plugins
    return manager.load_all_plugins()
           â”‚       â”” <function PluginManager.load_all_plugins at 0x7fbe205a7280>
           â”” <nonebot.plugin.manager.PluginManager object at 0x7fbe18f257c0>
  File "/usr/local/python3/lib/python3.8/site-packages/nonebot/plugin/manager.py", line 128, in load_all_plugins
    return set(
  File "/usr/local/python3/lib/python3.8/site-packages/nonebot/plugin/manager.py", line 129, in <genexpr>
    filter(None, (self.load_plugin(name) for name in self.list_plugins()))
                  â”‚    â”‚           â”‚         â”‚       â”‚    â”” <function PluginManager.list_plugins at 0x7fbe205a7160>
                  â”‚    â”‚           â”‚         â”‚       â”” <nonebot.plugin.manager.PluginManager object at 0x7fbe18f257c0>
                  â”‚    â”‚           â”‚         â”” 'atri_setu'
                  â”‚    â”‚           â”” 'atri_setu'
                  â”‚    â”” <function PluginManager.load_plugin at 0x7fbe205a71f0>
                  â”” <nonebot.plugin.manager.PluginManager object at 0x7fbe18f257c0>
> File "/usr/local/python3/lib/python3.8/site-packages/nonebot/plugin/manager.py", line 106, in load_plugin
    module = importlib.import_module(
             â”‚         â”” <function import_module at 0x7fbe2a89e940>
             â”” <module 'importlib' from '/usr/local/python3/lib/python3.8/importlib/__init__.py'>
  File "/usr/local/python3/lib/python3.8/importlib/__init__.py", line 127, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           â”‚          â”‚           â”‚    â”‚        â”‚        â”” 0
           â”‚          â”‚           â”‚    â”‚        â”” None
           â”‚          â”‚           â”‚    â”” 0
           â”‚          â”‚           â”” 'src.plugins.atri_setu'
           â”‚          â”” <function _gcd_import at 0x7fbe2a9cd430>
           â”” <module 'importlib._bootstrap' (frozen)>
  File "<frozen importlib._bootstrap>", line 1014, in _gcd_import
  File "<frozen importlib._bootstrap>", line 991, in _find_and_load
  File "<frozen importlib._bootstrap>", line 975, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 671, in _load_unlocked
  File "/usr/local/python3/lib/python3.8/site-packages/nonebot/plugin/manager.py", line 194, in exec_module
    super().exec_module(module)
                        â”” <module 'src.plugins.atri_setu' from './src/plugins/atri_setu/__init__.py'>
  File "<frozen importlib._bootstrap_external>", line 783, in exec_module
  File "<frozen importlib._bootstrap>", line 219, in _call_with_frames_removed

  File "./src/plugins/atri_setu/__init__.py", line 81, in <module>
    setu_catcher = Setu().on_command("æ¶©å›¾å—…æŽ¢", "æ¶©å›¾å—…æŽ¢å™¨", block=False)
                   â”” <class 'src.plugins.atri_setu.data_source.Setu'>

  File "/usr/local/python3/lib/python3.8/site-packages/ATRI/service.py", line 262, in on_command
    return self.on_message(rule=command(*commands) & rule, block=True, **kwargs)
           â”‚    â”‚               â”‚        â”‚           â”‚                   â”” {'block': False}
           â”‚    â”‚               â”‚        â”‚           â”” <nonebot.internal.rule.Rule object at 0x7fbe17c5dfa0>
           â”‚    â”‚               â”‚        â”” {'æ¶©å›¾å—…æŽ¢'}
           â”‚    â”‚               â”” <function command at 0x7fbe20596d30>
           â”‚    â”” <function Service.on_message at 0x7fbdfc9439d0>
           â”” <src.plugins.atri_setu.data_source.Setu object at 0x7fbe17c5deb0>

TypeError: on_message() got multiple values for keyword argument 'block'
[36mATRI[0m | 03-04 09:15:04 | ERROR nonebot >> Running matcher <Matcher from src.plugins.nonebot_plugin_heweather, type=message, priority=1, temp=False> failed.
Traceback (most recent call last):

  File "/usr/bin/nb", line 8, in <module>
    sys.exit(main())
    â”‚   â”‚    â”” <ClickAliasedGroup main>
    â”‚   â”” <built-in function exit>
    â”” <module 'sys' (built-in)>
  File "/usr/local/python3/lib/python3.8/site-packages/click/core.py", line 1128, in __call__
    return self.main(*args, **kwargs)
           â”‚    â”‚     â”‚       â”” {}
           â”‚    â”‚     â”” ()
           â”‚    â”” <function BaseCommand.main at 0x7fbe226eb040>
           â”” <ClickAliasedGroup main>
  File "/usr/local/python3/lib/python3.8/site-packages/click/core.py", line 1053, in main
    rv = self.invoke(ctx)
         â”‚    â”‚      â”” <click.core.Context object at 0x7fbe22f713a0>
         â”‚    â”” <function MultiCommand.invoke at 0x7fbe226ef0d0>
         â”” <ClickAliasedGroup main>
  File "/usr/local/python3/lib/python3.8/site-packages/click/core.py", line 1659, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
           â”‚               â”‚       â”‚       â”‚      â”” <click.core.Context object at 0x7fbe2a85e220>
           â”‚               â”‚       â”‚       â”” <function Command.invoke at 0x7fbe226ebaf0>
           â”‚               â”‚       â”” <ClickAliasedCommand run>
           â”‚               â”” <click.core.Context object at 0x7fbe2a85e220>
           â”” <function MultiCommand.invoke.<locals>._process_result at 0x7fbe19617940>
  File "/usr/local/python3/lib/python3.8/site-packages/click/core.py", line 1395, in invoke
    return ctx.invoke(self.callback, **ctx.params)
           â”‚   â”‚      â”‚    â”‚           â”‚   â”” {'file': 'bot.py', 'app': 'app'}
           â”‚   â”‚      â”‚    â”‚           â”” <click.core.Context object at 0x7fbe2a85e220>
           â”‚   â”‚      â”‚    â”” <function run at 0x7fbe19742820>
           â”‚   â”‚      â”” <ClickAliasedCommand run>
           â”‚   â”” <function Context.invoke at 0x7fbe226e78b0>
           â”” <click.core.Context object at 0x7fbe2a85e220>
  File "/usr/local/python3/lib/python3.8/site-packages/click/core.py", line 754, in invoke
    return __callback(*args, **kwargs)
                       â”‚       â”” {'file': 'bot.py', 'app': 'app'}
                       â”” ()
  File "/usr/local/python3/lib/python3.8/site-packages/nb_cli/commands/main.py", line 30, in run
    run_bot(file, app)
    â”‚       â”‚     â”” 'app'
    â”‚       â”” 'bot.py'
    â”” <function run_bot at 0x7fbe197325e0>
  File "/usr/local/python3/lib/python3.8/site-packages/nb_cli/handlers/deploy.py", line 24, in run_bot
    nonebot.run(app=f"{module_name}:{app}")
    â”‚       â”” <function run at 0x7fbe1b81a8b0>
    â”” <module 'nonebot' from '/usr/local/python3/lib/python3.8/site-packages/nonebot/__init__.py'>
  File "/usr/local/python3/lib/python3.8/site-packages/nonebot/__init__.py", line 258, in run
    get_driver().run(*args, **kwargs)
    â”‚                 â”‚       â”” {'app': 'bot:app'}
    â”‚                 â”” ()
    â”” <function get_driver at 0x7fbe1b81a430>
  File "/usr/local/python3/lib/python3.8/site-packages/nonebot/drivers/fastapi.py", line 168, in run
    uvicorn.run(
    â”‚       â”” <function run at 0x7fbe1953e5e0>
    â”” <module 'uvicorn' from '/usr/local/python3/lib/python3.8/site-packages/uvicorn/__init__.py'>
  File "/usr/local/python3/lib/python3.8/site-packages/uvicorn/main.py", line 463, in run
    server.run()
    â”‚      â”” <function Server.run at 0x7fbe1953e9d0>
    â”” <uvicorn.server.Server object at 0x7fbdae329cd0>
  File "/usr/local/python3/lib/python3.8/site-packages/uvicorn/server.py", line 60, in run
    return asyncio.run(self.serve(sockets=sockets))
           â”‚       â”‚   â”‚    â”‚             â”” None
           â”‚       â”‚   â”‚    â”” <function Server.serve at 0x7fbe1953ea60>
           â”‚       â”‚   â”” <uvicorn.server.Server object at 0x7fbdae329cd0>
           â”‚       â”” <function run at 0x7fbe1ef783a0>
           â”” <module 'asyncio' from '/usr/local/python3/lib/python3.8/asyncio/__init__.py'>
  File "/usr/local/python3/lib/python3.8/asyncio/runners.py", line 43, in run
    return loop.run_until_complete(main)
           â”‚    â”‚                  â”” <coroutine object Server.serve at 0x7fbdae2d3ac0>
           â”‚    â”” <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
           â”” <uvloop.Loop running=True closed=False debug=False>
  File "/usr/local/python3/lib/python3.8/site-packages/nonebot/message.py", line 153, in _check_matcher
    await _run_matcher(Matcher, bot, event, state, stack, dependency_cache)
          â”‚            â”‚        â”‚    â”‚      â”‚      â”‚      â”” {<function _command at 0x7fbe1b8580d0>: <Task finished name='Task-389' coro=<_command() done, defined at /usr/local/python3/l...
          â”‚            â”‚        â”‚    â”‚      â”‚      â”” <contextlib.AsyncExitStack object at 0x7fbdad0de790>
          â”‚            â”‚        â”‚    â”‚      â”” {'_prefix': {'command': None, 'raw_command': None, 'command_arg': None}, '_matched': '/æ·±åœ³å¤©æ°”', '_matched_groups': ('/æ·±åœ³',), '_...
          â”‚            â”‚        â”‚    â”” GroupMessageEvent(time=1646356503, self_id=507346814, post_type='message', sub_type='normal', user_id=2560359315, message_typ...
          â”‚            â”‚        â”” <nonebot.adapters.onebot.v11.bot.Bot object at 0x7fbdad07b4f0>
          â”‚            â”” <Matcher from src.plugins.nonebot_plugin_heweather, type=message, priority=1, temp=False>
          â”” <function _run_matcher at 0x7fbe1965c5e0>
> File "/usr/local/python3/lib/python3.8/site-packages/nonebot/message.py", line 202, in _run_matcher
    await matcher.run(bot, event, state, stack, dependency_cache)
          â”‚       â”‚   â”‚    â”‚      â”‚      â”‚      â”” {<function _command at 0x7fbe1b8580d0>: <Task finished name='Task-389' coro=<_command() done, defined at /usr/local/python3/l...
          â”‚       â”‚   â”‚    â”‚      â”‚      â”” <contextlib.AsyncExitStack object at 0x7fbdad0de790>
          â”‚       â”‚   â”‚    â”‚      â”” {'_prefix': {'command': None, 'raw_command': None, 'command_arg': None}, '_matched': '/æ·±åœ³å¤©æ°”', '_matched_groups': ('/æ·±åœ³',), '_...
          â”‚       â”‚   â”‚    â”” GroupMessageEvent(time=1646356503, self_id=507346814, post_type='message', sub_type='normal', user_id=2560359315, message_typ...
          â”‚       â”‚   â”” <nonebot.adapters.onebot.v11.bot.Bot object at 0x7fbdad07b4f0>
          â”‚       â”” <function Matcher.run at 0x7fbe1b856af0>
          â”” <Matcher from src.plugins.nonebot_plugin_heweather, type=message, priority=1, temp=False>
  File "/usr/local/python3/lib/python3.8/site-packages/nonebot/internal/matcher.py", line 668, in run
    await self.simple_run(bot, event, state, stack, dependency_cache)
          â”‚    â”‚          â”‚    â”‚      â”‚      â”‚      â”” {<function _command at 0x7fbe1b8580d0>: <Task finished name='Task-389' coro=<_command() done, defined at /usr/local/python3/l...
          â”‚    â”‚          â”‚    â”‚      â”‚      â”” <contextlib.AsyncExitStack object at 0x7fbdad0de790>
          â”‚    â”‚          â”‚    â”‚      â”” {'_prefix': {'command': None, 'raw_command': None, 'command_arg': None}, '_matched': '/æ·±åœ³å¤©æ°”', '_matched_groups': ('/æ·±åœ³',), '_...
          â”‚    â”‚          â”‚    â”” GroupMessageEvent(time=1646356503, self_id=507346814, post_type='message', sub_type='normal', user_id=2560359315, message_typ...
          â”‚    â”‚          â”” <nonebot.adapters.onebot.v11.bot.Bot object at 0x7fbdad07b4f0>
          â”‚    â”” <function Matcher.simple_run at 0x7fbe1b856a60>
          â”” <Matcher from src.plugins.nonebot_plugin_heweather, type=message, priority=1, temp=False>
  File "/usr/local/python3/lib/python3.8/site-packages/nonebot/internal/matcher.py", line 635, in simple_run
    await handler(
          â”” <Dependent call=<function _ at 0x7fbdae30bf70>, params=[ModelField(name='bot', type=Bot, required=True), ModelField(name='eve...
  File "/usr/local/python3/lib/python3.8/site-packages/nonebot/dependencies/__init__.py", line 92, in __call__
    return await self.call(**values)
                 â”‚    â”‚      â”” {'bot': <nonebot.adapters.onebot.v11.bot.Bot object at 0x7fbdad07b4f0>, 'event': GroupMessageEvent(time=1646356503, self_id=5...
                 â”‚    â”” <function _ at 0x7fbdae30bf70>
                 â”” <Dependent call=<function _ at 0x7fbdae30bf70>, params=[ModelField(name='bot', type=Bot, required=True), ModelField(name='eve...

  File "./src/plugins/nonebot_plugin_heweather/__init__.py", line 35, in _
    img = await render(w_data)
                â”‚      â”” <src.plugins.nonebot_plugin_heweather.weather_data.Weather object at 0x7fbdad056c40>
                â”” <function render at 0x7fbdae3b7c10>

  File "./src/plugins/nonebot_plugin_heweather/render_pic.py", line 11, in render
    return await template_to_pic(
                 â”” <function template_to_pic at 0x7fbe1606b820>

  File "/usr/local/python3/lib/python3.8/site-packages/nonebot_plugin_htmlrender/date_source.py", line 194, in template_to_pic
    return await html_to_pic(
                 â”” <function html_to_pic at 0x7fbe1606b790>
  File "/usr/local/python3/lib/python3.8/site-packages/nonebot_plugin_htmlrender/date_source.py", line 159, in html_to_pic
    await page.goto(template_path)
          â”‚    â”‚    â”” 'file://src/plugins/nonebot_plugin_heweather/templates'
          â”‚    â”” <function Page.goto at 0x7fbe1634b9d0>
          â”” <Page url='about:blank'>
  File "/usr/local/python3/lib/python3.8/site-packages/playwright/async_api/_generated.py", line 7516, in goto
    await self._async(
          â”‚    â”” <function AsyncBase._async at 0x7fbe1638c310>
          â”” <Page url='about:blank'>
  File "/usr/local/python3/lib/python3.8/site-packages/playwright/_impl/_page.py", line 487, in goto
    return await self._main_frame.goto(**locals_to_params(locals()))
                 â”‚    â”‚           â”‚      â”” <function locals_to_params at 0x7fbe166dc1f0>
                 â”‚    â”‚           â”” <function Frame.goto at 0x7fbe163d1dc0>
                 â”‚    â”” <Frame name= url='about:blank'>
                 â”” <Page url='about:blank'>
  File "/usr/local/python3/lib/python3.8/site-packages/playwright/_impl/_frame.py", line 122, in goto
    await self._channel.send("goto", locals_to_params(locals()))
          â”‚    â”‚        â”‚            â”” <function locals_to_params at 0x7fbe166dc1f0>
          â”‚    â”‚        â”” <function Channel.send at 0x7fbe1645ee50>
          â”‚    â”” <playwright._impl._connection.Channel object at 0x7fbdad056af0>
          â”” <Frame name= url='about:blank'>
  File "/usr/local/python3/lib/python3.8/site-packages/playwright/_impl/_connection.py", line 39, in send
    return await self.inner_send(method, params, False)
                 â”‚    â”‚          â”‚       â”” {'url': 'file://src/plugins/nonebot_plugin_heweather/templates'}
                 â”‚    â”‚          â”” 'goto'
                 â”‚    â”” <function Channel.inner_send at 0x7fbe1645ef70>
                 â”” <playwright._impl._connection.Channel object at 0x7fbdad056af0>
  File "/usr/local/python3/lib/python3.8/site-packages/playwright/_impl/_connection.py", line 63, in inner_send
    result = next(iter(done)).result()
                       â”” {<Future finished exception=Error('net::ERR_INVALID_URL at file://src/plugins/nonebot_plugin_heweather/templates\n===========...

playwright._impl._api_types.Error: net::ERR_INVALID_URL at file://src/plugins/nonebot_plugin_heweather/templates
=========================== logs ===========================
navigating to "file://src/plugins/nonebot_plugin_heweather/templates", waiting until "load"
============================================================
[36mATRI[0m | 03-04 09:15:54 | ERROR nonebot >> Running matcher <Matcher from src.plugins.nonebot_plugin_songpicker2, type=message, priority=1, temp=False> failed.
Traceback (most recent call last):

  File "/usr/bin/nb", line 8, in <module>
    sys.exit(main())
    â”‚   â”‚    â”” <ClickAliasedGroup main>
    â”‚   â”” <built-in function exit>
    â”” <module 'sys' (built-in)>
  File "/usr/local/python3/lib/python3.8/site-packages/click/core.py", line 1128, in __call__
    return self.main(*args, **kwargs)
           â”‚    â”‚     â”‚       â”” {}
           â”‚    â”‚     â”” ()
           â”‚    â”” <function BaseCommand.main at 0x7fbe226eb040>
           â”” <ClickAliasedGroup main>
  File "/usr/local/python3/lib/python3.8/site-packages/click/core.py", line 1053, in main
    rv = self.invoke(ctx)
         â”‚    â”‚      â”” <click.core.Context object at 0x7fbe22f713a0>
         â”‚    â”” <function MultiCommand.invoke at 0x7fbe226ef0d0>
         â”” <ClickAliasedGroup main>
  File "/usr/local/python3/lib/python3.8/site-packages/click/core.py", line 1659, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
           â”‚               â”‚       â”‚       â”‚      â”” <click.core.Context object at 0x7fbe2a85e220>
           â”‚               â”‚       â”‚       â”” <function Command.invoke at 0x7fbe226ebaf0>
           â”‚               â”‚       â”” <ClickAliasedCommand run>
           â”‚               â”” <click.core.Context object at 0x7fbe2a85e220>
           â”” <function MultiCommand.invoke.<locals>._process_result at 0x7fbe19617940>
  File "/usr/local/python3/lib/python3.8/site-packages/click/core.py", line 1395, in invoke
    return ctx.invoke(self.callback, **ctx.params)
           â”‚   â”‚      â”‚    â”‚           â”‚   â”” {'file': 'bot.py', 'app': 'app'}
           â”‚   â”‚      â”‚    â”‚           â”” <click.core.Context object at 0x7fbe2a85e220>
           â”‚   â”‚      â”‚    â”” <function run at 0x7fbe19742820>
           â”‚   â”‚      â”” <ClickAliasedCommand run>
           â”‚   â”” <function Context.invoke at 0x7fbe226e78b0>
           â”” <click.core.Context object at 0x7fbe2a85e220>
  File "/usr/local/python3/lib/python3.8/site-packages/click/core.py", line 754, in invoke
    return __callback(*args, **kwargs)
                       â”‚       â”” {'file': 'bot.py', 'app': 'app'}
                       â”” ()
  File "/usr/local/python3/lib/python3.8/site-packages/nb_cli/commands/main.py", line 30, in run
    run_bot(file, app)
    â”‚       â”‚     â”” 'app'
    â”‚       â”” 'bot.py'
    â”” <function run_bot at 0x7fbe197325e0>
  File "/usr/local/python3/lib/python3.8/site-packages/nb_cli/handlers/deploy.py", line 24, in run_bot
    nonebot.run(app=f"{module_name}:{app}")
    â”‚       â”” <function run at 0x7fbe1b81a8b0>
    â”” <module 'nonebot' from '/usr/local/python3/lib/python3.8/site-packages/nonebot/__init__.py'>
  File "/usr/local/python3/lib/python3.8/site-packages/nonebot/__init__.py", line 258, in run
    get_driver().run(*args, **kwargs)
    â”‚                 â”‚       â”” {'app': 'bot:app'}
    â”‚                 â”” ()
    â”” <function get_driver at 0x7fbe1b81a430>
  File "/usr/local/python3/lib/python3.8/site-packages/nonebot/drivers/fastapi.py", line 168, in run
    uvicorn.run(
    â”‚       â”” <function run at 0x7fbe1953e5e0>
    â”” <module 'uvicorn' from '/usr/local/python3/lib/python3.8/site-packages/uvicorn/__init__.py'>
  File "/usr/local/python3/lib/python3.8/site-packages/uvicorn/main.py", line 463, in run
    server.run()
    â”‚      â”” <function Server.run at 0x7fbe1953e9d0>
    â”” <uvicorn.server.Server object at 0x7fbdae329cd0>
  File "/usr/local/python3/lib/python3.8/site-packages/uvicorn/server.py", line 60, in run
    return asyncio.run(self.serve(sockets=sockets))
           â”‚       â”‚   â”‚    â”‚             â”” None
           â”‚       â”‚   â”‚    â”” <function Server.serve at 0x7fbe1953ea60>
           â”‚       â”‚   â”” <uvicorn.server.Server object at 0x7fbdae329cd0>
           â”‚       â”” <function run at 0x7fbe1ef783a0>
           â”” <module 'asyncio' from '/usr/local/python3/lib/python3.8/asyncio/__init__.py'>
  File "/usr/local/python3/lib/python3.8/asyncio/runners.py", line 43, in run
    return loop.run_until_complete(main)
           â”‚    â”‚                  â”” <coroutine object Server.serve at 0x7fbdae2d3ac0>
           â”‚    â”” <method 'run_until_complete' of 'uvloop.loop.Loop' objects>
           â”” <uvloop.Loop running=True closed=False debug=False>
  File "/usr/local/python3/lib/python3.8/site-packages/nonebot/message.py", line 153, in _check_matcher
    await _run_matcher(Matcher, bot, event, state, stack, dependency_cache)
          â”‚            â”‚        â”‚    â”‚      â”‚      â”‚      â”” {<function _command at 0x7fbe1b8580d0>: <Task finished name='Task-4565' coro=<_command() done, defined at /usr/local/python3/...
          â”‚            â”‚        â”‚    â”‚      â”‚      â”” <contextlib.AsyncExitStack object at 0x7fbdac2b9e20>
          â”‚            â”‚        â”‚    â”‚      â”” {'_prefix': {'command': ('ç‚¹æ­Œ',), 'raw_command': '/ç‚¹æ­Œ', 'command_arg': [MessageSegment(type='text', data={'text': 'hop'})]}}
          â”‚            â”‚        â”‚    â”” GroupMessageEvent(time=1646356554, self_id=507346814, post_type='message', sub_type='normal', user_id=2560359315, message_typ...
          â”‚            â”‚        â”” <nonebot.adapters.onebot.v11.bot.Bot object at 0x7fbdad07b4f0>
          â”‚            â”” <Matcher from src.plugins.nonebot_plugin_songpicker2, type=message, priority=1, temp=False>
          â”” <function _run_matcher at 0x7fbe1965c5e0>
> File "/usr/local/python3/lib/python3.8/site-packages/nonebot/message.py", line 202, in _run_matcher
    await matcher.run(bot, event, state, stack, dependency_cache)
          â”‚       â”‚   â”‚    â”‚      â”‚      â”‚      â”” {<function _command at 0x7fbe1b8580d0>: <Task finished name='Task-4565' coro=<_command() done, defined at /usr/local/python3/...
          â”‚       â”‚   â”‚    â”‚      â”‚      â”” <contextlib.AsyncExitStack object at 0x7fbdac2b9e20>
          â”‚       â”‚   â”‚    â”‚      â”” {'_prefix': {'command': ('ç‚¹æ­Œ',), 'raw_command': '/ç‚¹æ­Œ', 'command_arg': [MessageSegment(type='text', data={'text': 'hop'})]}}
          â”‚       â”‚   â”‚    â”” GroupMessageEvent(time=1646356554, self_id=507346814, post_type='message', sub_type='normal', user_id=2560359315, message_typ...
          â”‚       â”‚   â”” <nonebot.adapters.onebot.v11.bot.Bot object at 0x7fbdad07b4f0>
          â”‚       â”” <function Matcher.run at 0x7fbe1b856af0>
          â”” <Matcher from src.plugins.nonebot_plugin_songpicker2, type=message, priority=1, temp=False>
  File "/usr/local/python3/lib/python3.8/site-packages/nonebot/internal/matcher.py", line 668, in run
    await self.simple_run(bot, event, state, stack, dependency_cache)
          â”‚    â”‚          â”‚    â”‚      â”‚      â”‚      â”” {<function _command at 0x7fbe1b8580d0>: <Task finished name='Task-4565' coro=<_command() done, defined at /usr/local/python3/...
          â”‚    â”‚          â”‚    â”‚      â”‚      â”” <contextlib.AsyncExitStack object at 0x7fbdac2b9e20>
          â”‚    â”‚          â”‚    â”‚      â”” {'_prefix': {'command': ('ç‚¹æ­Œ',), 'raw_command': '/ç‚¹æ­Œ', 'command_arg': [MessageSegment(type='text', data={'text': 'hop'})]}}
          â”‚    â”‚          â”‚    â”” GroupMessageEvent(time=1646356554, self_id=507346814, post_type='message', sub_type='normal', user_id=2560359315, message_typ...
          â”‚    â”‚          â”” <nonebot.adapters.onebot.v11.bot.Bot object at 0x7fbdad07b4f0>
          â”‚    â”” <function Matcher.simple_run at 0x7fbe1b856a60>
          â”” <Matcher from src.plugins.nonebot_plugin_songpicker2, type=message, priority=1, temp=False>
  File "/usr/local/python3/lib/python3.8/site-packages/nonebot/internal/matcher.py", line 635, in simple_run
    await handler(
          â”” <Dependent call=<function handle_songName at 0x7fbdfc7c50d0>, params=[ModelField(name='bot', type=Bot, required=True), ModelF...
  File "/usr/local/python3/lib/python3.8/site-packages/nonebot/dependencies/__init__.py", line 92, in __call__
    return await self.call(**values)
                 â”‚    â”‚      â”” {'bot': <nonebot.adapters.onebot.v11.bot.Bot object at 0x7fbdad07b4f0>, 'event': GroupMessageEvent(time=1646356554, self_id=5...
                 â”‚    â”” <function handle_songName at 0x7fbdfc7c50d0>
                 â”” <Dependent call=<function handle_songName at 0x7fbdfc7c50d0>, params=[ModelField(name='bot', type=Bot, required=True), ModelF...

  File "./src/plugins/nonebot_plugin_songpicker2/__init__.py", line 39, in handle_songName
    songName = state["songName"]

NameError: name 'state' is not defined
[36mATRI[0m | 03-04 11:05:56 | WARNING nonebot >> OneBot V11 | WebSocket for Bot 507346814 closed by peer
